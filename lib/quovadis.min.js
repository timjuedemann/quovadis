"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=quoVadis;var isVer,e,pivot,settings={off:!1,context:$(window),horizontal:!1,historyLength:32,historyMaxAge:512,thresholdPixels:64,callback:function(){$("html").removeClass((function(index,className){return(className.match(/(^|\s)scrolling-\S+/g)||[]).join(" ")})).addClass("scrolling-"+dir)},event:!0,fireEvent:function(){window.dispatchEvent(new CustomEvent("scrollDirectionChange",{detail:{direction:dir}}))}},$document=$(document),$window=settings.context,historyLength=settings.historyLength,historyMaxAge=settings.historyMaxAge,thresholdPixels=settings.thresholdPixels,history=Array(historyLength),dir=isVer?"down":"right",pivotTime=0,tick=function(){var y=isVer?$window.scrollTop():$window.scrollLeft(),t=e.timeStamp,furthest="down"===dir||"right"===dir?Math.max:Math.min,yMax=isVer?$document.height()-$window.height():$document.width()-$window.width();if(y=Math.max(0,y),y=Math.min(yMax,y),history.unshift({y:y,t:t}),history.pop(),y===furthest(pivot,y))return pivotTime=t,void(pivot=y);var cutoffTime=t-historyMaxAge;if(cutoffTime>pivotTime){pivot=y;for(var i=0;i<historyLength&&(history[i]&&!(history[i].t<cutoffTime));i+=1)pivot=furthest(pivot,history[i].y)}Math.abs(y-pivot)>thresholdPixels&&(pivot=y,pivotTime=t,dir=isVer?"down"===dir?"up":"down":"right"===dir?"left":"right",settings.callback(),!0===settings.event&&settings.fireEvent())},handler=function(event){e=event,window.requestAnimationFrame(tick)};function quoVadis(options){return!0===(settings=$.extend({},settings,options)).off?$window.off("scroll",handler):(isVer=!settings.horizontal,pivot=isVer?$window.scrollTop():$window.scrollLeft(),settings.callback(),$window.on("scroll",handler))}var plugin=window.$||window.jQuery||window.Zepto;if(!plugin)throw Error("scroll-intent requires jQuery or Zepto");plugin.fn.extend({quoVadis:function(options){return quoVadis(options)}});